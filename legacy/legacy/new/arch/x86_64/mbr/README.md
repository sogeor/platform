# `x86/mbr`

## Введение

Представляет собой главную загрузочную запись, необходимую для начальной загрузки при типе таблицы разделов `mbr`.

## Работа с системой сборки

### Правила

#### `all`

Выполняются правила `clean`, `build` и `emulate`.

#### `clean`

Удаляются все объектные файлы, которые могут существовать согласно текущей конфигурации.

#### `build`

Выполняется сборка и сохранение образа в файл `mbr.bin`.

#### `emulate`

Выполняется эмуляция главной загрузочной записи с помощью `QEMU`.

### Конфигурация сборки

#### Введение

В следующей таблице приведены допустимые значения для переменных с определёнными именами:

| Имя           | Описание                              | Допустимые значения                                                                                                                                                                                                                                                                      |
|:--------------|:--------------------------------------|:-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| `p..._status` | Задаёт статус раздела.                | `unknown` — `0`, то есть загрузка с раздела невозможна. `bootable` — `0x80`, то есть загрузка с раздела возможна.                                                                                                                                                                        |
| `p..._type`   | Задаёт тип раздела.                   | `unknown` — `0`, то есть загрузка с раздела невозможна. `standard` — `0x13`, то есть раздел относится к `Sogeor Platform`. `efi` — `0xEE`, то есть загрузка с раздела невозможна, однако после `MBR` располагается заголовок таблицы разделов, необходимый для загрузки с помощью `GPT`. |
| `p..._offset` | Задаёт LBA раздела.                   | `unknown` — `0`, то есть загрузка с раздела невозможна. `1...0xFFFFFFFF` — то есть загрузка с раздела возможна.                                                                                                                                                                          |
| `p..._size`   | Задаёт количество секторов в разделе. | `unknown` — `0`, то есть загрузка с раздела невозможна. `1...0xFFFFFFFF` — то есть загрузка с раздела возможна.                                                                                                                                                                          |

| Имя              | Описание                              | Допустимые значения                                                                                                                                                                                                                                                                      |
|:-----------------|:--------------------------------------|:-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| `p..._status`    | Задаёт статус раздела.                | `0` — загрузка с раздела невозможна. `0x80` — загрузка с раздела возможна.                                                                                                                                                                                                               |
| `p..._chs_start` | Задаёт начальный CHS-адрес раздела.   | `0` — загрузка с раздела невозможна. `1..0xFFFFFE` — раздел находится в пределах. `1..0xFFFFFF` — загрузка с раздела возможна.                                                                                                                                                           |
| `p..._type`      | Задаёт тип раздела.                   | `unknown` — `0`, то есть загрузка с раздела невозможна. `standard` — `0x13`, то есть раздел относится к `Sogeor Platform`. `efi` — `0xEE`, то есть загрузка с раздела невозможна, однако после `MBR` располагается заголовок таблицы разделов, необходимый для загрузки с помощью `GPT`. |
| `p..._offset`    | Задаёт LBA раздела.                   | `unknown` — `0`, то есть загрузка с раздела невозможна. `1...0xFFFFFFFF` — то есть загрузка с раздела возможна.                                                                                                                                                                          |
| `p..._size`      | Задаёт количество секторов в разделе. | `unknown` — `0`, то есть загрузка с раздела невозможна. `1...0xFFFFFFFF` — то есть загрузка с раздела возможна.                                                                                                                                                                          |

#### Переменные, определяющие первый раздел

| Имя         | Описание                                     | Значение по умолчанию |
|:------------|:---------------------------------------------|:----------------------|
| `p1_status` | Задаёт статус первого раздела.               | `unknown`             |
| `p1_type`   | Задаёт тип первого раздела.                  | `unknown`             |
| `p1_offset` | Задаёт LBA первого раздела.                  | `unknown`             |
| `p1_size`   | Задаёт количество секторов в первом разделе. | `unknown`             |

#### Переменные, определяющие второй раздел

| Имя         | Описание                                      | Значение по умолчанию |
|:------------|:----------------------------------------------|:----------------------|
| `p2_status` | Задаёт статус второго раздела.                | `unknown`             |
| `p2_type`   | Задаёт тип второго раздела.                   | `unknown`             |
| `p2_offset` | Задаёт LBA второго раздела.                   | `unknown`             |
| `p2_size`   | Задаёт количество секторов во втором разделе. | `unknown`             |

#### Переменные, определяющие третий раздел

| Имя         | Описание                                      | Значение по умолчанию |
|:------------|:----------------------------------------------|:----------------------|
| `p3_status` | Задаёт статус третьего раздела.               | `unknown`             |
| `p3_type`   | Задаёт тип третьего раздела.                  | `unknown`             |
| `p3_offset` | Задаёт LBA третьего раздела.                  | `unknown`             |
| `p3_size`   | Задаёт количество секторов в третьем разделе. | `unknown`             |

#### Переменные, определяющие четвёртый раздел

| Имя         | Описание                                        | Значение по умолчанию |
|:------------|:------------------------------------------------|:----------------------|
| `p4_status` | Задаёт статус четвёртого раздела.               | `unknown`             |
| `p4_type`   | Задаёт тип четвёртого раздела.                  | `unknown`             |
| `p4_offset` | Задаёт LBA четвёртого раздела.                  | `unknown`             |
| `p4_size`   | Задаёт количество секторов в четвёртом разделе. | `unknown`             |
